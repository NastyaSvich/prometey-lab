---
import Button from "src/components/button/Button.astro";
import "src/layout/header/Header.less";
import email from "@assets/images/email2.svg";
import telegram from "@assets/images/telegram3.svg";
import telephone from "@assets/images/telephone2.svg";
import { Image } from "astro:assets";
import LogoComponent from "src/layout/header/LogoComponent.astro";

---

<header class="header">
    <div class="header-content">
        <div class="header-top">
            <a href="tel:+79229529944">+ 7 (922) 952-99-44</a>
            <a href="mailto:sales@prometey-lab.ru">sales@prometey-lab.ru</a>
        </div>

        <div class="header-bottom">
           <LogoComponent />

            <div class="hamburger">
                <span class="line"></span>
                <span class="line"></span>
                <span class="line"></span>
            </div>

            <div class="menu">
                <div class="menu-logo">
                   <LogoComponent />
                </div>

                <nav class="navigation">
                    <a href="/services">Услуги</a>
                    <a href="/company">О компании</a>
                </nav>

                <a href="#contacts" class="contacts-link">
                    <Button label="Контакты" size="medium" />
                </a>

                <div class="contact-information">
                    <ul>
                        <li>
                            <a href="https://t.me/CTO_Path_PrometeyLab"
                                ><Image
                                    class="logo right-shift"
                                    alt="Сопровождение баз данных MS SQL и MySQL telegram"
                                    src={telegram}
                                />PrometeyLab</a
                            >
                        </li>
                        <li>
                            <a href="mailto:sales@prometey-lab.ru"
                                ><span class="logo-container right-shift"
                                    ><Image
                                        class="logo minimized"
                                        alt="Обслуживание баз данных"
                                        src={email}
                                    /></span
                                >sales@prometey-lab.ru</a
                            >
                        </li>
                        <li>
                            <a href="tel:+79229529944"
                                ><span class="logo-container right-shift"
                                    ><Image
                                        class="logo minimized"
                                        alt="Миграция баз данных"
                                        src={telephone}
                                    /></span
                                >+ 7 (922) 952-99-44</a
                            >
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</header>

<script is:inline type="module">
    const hamburger = document.querySelector(".hamburger");
    const menu = document.querySelector(".menu");
    const body = document.body;

    if (hamburger && menu) {
        hamburger.addEventListener("click", () => {
            hamburger.classList.toggle("active");
            menu.classList.toggle("expanded");

            body.style.overflow = menu.classList.contains("expanded")
                ? "hidden"
                : "";
        });
    }
    function updateTitle() {
        if (window.location.hash === '#contacts') {
        document.title = 'Контакты Прометея';
        }
    }
    function updateMetaDescription() {
        const meta = document.querySelector('meta[name="description"]');
        if (!meta) return;
        if (window.location.hash === '#contacts') {
            meta.setAttribute('content', 'Свяжитесь с нами, чтобы обсудить DevOps-проекты или сопровождение баз данных. Ответим быстро и по делу.');
        }
    }
    function updateHeadOnHashChange() {
        updateMetaDescription();
        updateTitle();
    }

    updateHeadOnHashChange();
    window.addEventListener('hashchange', updateHeadOnHashChange); // Listen for future changes
</script>