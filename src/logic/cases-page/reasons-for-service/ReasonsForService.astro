---
import { Image, getImage } from "astro:assets";
import type { CardWithoutTitleProps } from "src/components/card-without-title/CardWithoutTitle.astro";
import CardWithoutTitle from "src/components/card-without-title/CardWithoutTitle.astro";
import HorizontalLineTitle from "src/components/horizontal-line-title/HorizontalLineTitle.astro";
import card1 from "src/assets/images/card-background-1.png";
import card2 from "src/assets/images/card-background-2.png";
import card3 from "src/assets/images/card-background-3.png";
import card5 from "src/assets/images/card-background-5.png";
import "src/logic/cases-page/reasons-for-service/ReasonsForService.less";

const createBackground = async (image: ImageMetadata) => {
    const img = await getImage({ src: image });
    return `url(${img.src}) center/cover no-repeat`;
};

const reasons: CardWithoutTitleProps[] = [
    {
        description: "Приложение или сайт не выдерживают нагрузки",
        background: await createBackground(card5),
    },
    {
        description: "Необходимо ускорить процессы разработки и внедрения ПО",
        background: await createBackground(card2),
    },
    {
        description: "Инфраструктуре не хватает мощностей",
        background: await createBackground(card1),
    },
    {
        description: "Бизнесу пора масштабироваться",
        background: await createBackground(card3),
    },
];

/**
 * Компонент раздела "Зачем бизнесу DevOps сервис".
 */
---

<HorizontalLineTitle
    title="ЗАЧЕМ БИЗНЕСУ НУЖЕН DEVOPS СЕРВИС"
    className="reasons"
    contentClassName="reasons-content"
>
    {
        reasons.map(({ description, background }) => (
            <CardWithoutTitle
                description={description}
                background={background}
            />
        ))
    }
</HorizontalLineTitle>
